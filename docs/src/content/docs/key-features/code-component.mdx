---
title: Code Component
---

import PropertySignature from '@components/PropertySignature.astro'

import { Tabs, TabItem } from '@astrojs/starlight/components'

In addition to rendering fenced code blocks in markdown & MDX documents, the Expressive Code Astro integration also provides a `<Code>` component that can be used from `.astro` and `.mdx` pages.

The `<Code>` component provides props like `code`, `lang` or `meta` that allow you to dynamically define a code block's contents. Using this component, you can render code blocks from variables or data coming from external sources like files, databases or APIs.

## Adding the component to a page

Before you can use the `<Code>` component, you must first add an import statement to the page. The location and syntax of the import statement depend on the integration and type of page you are using:

### Starlight

In Starlight projects, you will be mostly using the `<Code>` component on `.mdx` pages. The following example shows how you can do this and use props to define the code block's contents:

```mdx title="src/content/docs/example.mdx" ins={4, 10}
---
title: My example page
---
import { Code } from '@astrojs/starlight/components'

export const exampleCode = `console.log('This could come from a file or CMS!');`;
export const fileName = 'example.js';
export const highlights = ['file', 'CMS'];

<Code code={exampleCode} lang="js" title={fileName} mark={highlights} />
```

The code above generates the following on the page:

import { Code } from '@astrojs/starlight/components'

export const exampleCode = `console.log('This could come from a file or CMS!');`;
export const fileName = 'example.js';
export const highlights = ['file', 'CMS'];

<Code code={exampleCode} lang="js" title={fileName} mark={highlights} />

### Astro

Using the `<Code>` component in Astro projects works just like in Starlight projects, except that you need to import it from `astro-expressive-code/components`:

<Tabs>
  <TabItem label=".astro">
    ```astro title="src/pages/index.astro" ins={3, 8}
    ---
    import MainLayout from '../layouts/MainLayout.astro'
    import { Code } from 'astro-expressive-code/components'
    ---
    <MainLayout>
      <h1>My example page</h1>
      <p>Here is some interesting code:</p>
      <Code code="console.log('Hello world!')" lang="js" />
    </MainLayout>
    ```
  </TabItem>
  <TabItem label=".mdx">
    ```mdx title="src/pages/index.mdx" ins={4, 10}
    ---
    layout: ../layouts/MainLayout.astro
    ---
    import { Code } from 'astro-expressive-code/components'

    # My example page

    Here is some interesting code:

    <Code code="console.log('Hello world!')" lang="js" />
    ```
  </TabItem>
</Tabs>

## Using an `ec.config.mjs` file

The `<Code>` component is designed to automatically pick up the Expressive Code configuration options from your project's Astro config file without requiring any additional setup.

Due to the way Astro works, the Expressive Code integration can only share its configuration with the component by serializing it to JSON. In some situations, this is not possible, e.g. when your configuration includes custom plugins or functions that are not serializable to JSON.

In these cases, you will receive the following error message when trying to use the `<Code>` component:

> *[ERROR] Failed to render a `<Code>` component on page [...]:*
>
> *Your Astro config file contains Expressive Code options that are not serializable to JSON. To use the `<Code>` component, please create a separate config file called `ec.config.mjs` in your project root, move your Expressive Code options object into the config file, and export it as the default export.*

As instructed by the error message, you can fix this issue by creating a separate `ec.config.mjs` file in your project root and moving your Expressive Code options object into the config file. Here is an example of how this file could look like if you're using the [collapsible sections plugin](/plugins/collapsible-sections/):

```js title="ec.config.mjs"
import { pluginCollapsibleSections } from '@expressive-code/plugin-collapsible-sections'

/** @type {import('@astrojs/starlight/expressive-code').AstroExpressiveCodeOptions} */
export default {
  // Example: Using a custom plugin (which makes this `ec.config.mjs` file necessary)
	plugins: [pluginCollapsibleSections()],
  // ... any other options you want to configure
}
```

## Available props

### code

<PropertySignature>
- Type: string
</PropertySignature>

The plaintext contents of the code block. This property is required and must be set to a non-empty string.

### lang

<PropertySignature>
- Type: string | undefined
- Default: undefined
</PropertySignature>

The code block's language.

Please use a valid [language identifier](/key-features/syntax-highlighting/#supported-languages) to ensure proper syntax highlighting.

### meta

<PropertySignature>
- Type: string | undefined
- Default: undefined
</PropertySignature>

An optional meta string. In markdown or MDX documents, this is the part of the code block's opening fence that comes after the language name.

### locale

<PropertySignature>
- Type: string | undefined
- Default: undefined
</PropertySignature>

The code block's locale (e.g. `en-US` or `de-DE`). This is used by plugins to display localized strings depending on the language of the containing page.

If no locale is defined here, most Expressive Code integrations will attempt to auto-detect the block locale using the configured [`getBlockLocale`](/reference/configuration/#getblocklocale) function, and finally fall back to the configured [`defaultLocale`](/reference/configuration/#defaultlocale).

### title

<PropertySignature>
- Type: string | undefined
- Default: undefined
</PropertySignature>

The code block's title.

Depending on the frame type (code or terminal), this title is displayed by the [frames plugin](/key-features/frames/) either as an open file tab label or as a terminal window title.

### frame

<PropertySignature>
- Type: `'auto' | 'code' | 'terminal' | 'none' | undefined`
- Default: `'auto'`
</PropertySignature>

The code block's [frame type](https://expressive-code.com/key-features/frames/#overriding-frame-types).

### mark / ins / del

<PropertySignature>
- Type: `string | number | RegExp | (string | number | RegExp)[] | undefined`
- Default: undefined
</PropertySignature>

Defines the code block's [text & line markers](/key-features/text-markers/).

You can either pass a single marker definition or an array of them.

### class

<PropertySignature>
- Type: string | undefined
- Default: undefined
</PropertySignature>

The CSS class name(s) to apply to the code block's container element.
